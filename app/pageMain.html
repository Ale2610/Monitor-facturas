<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Monitor Facturas - Launchpad</title>
    <style>
        #appFrame {
            width: 100%;
            height: 600px;
            border: none;
            margin-top: 20px;
        }
    </style>
    <script src="https://ui5.sap.com/resources/sap-ui-core.js"
        data-sap-ui-theme="sap_horizon"
        data-sap-ui-libs="sap.m, sap.ui.layout"
        data-sap-ui-xx-bindingSyntax="complex">
    </script>
    <script>
        // Cargar la config de aplicaciones
        window["sap-ushell-config"] = {
            defaultRenderer: "fiori2",
            applications: {
                "monitorfacturasdetalleorden-display": {
                    title: "Detalle Orden",
                    url: "./monitor_facturas.detalleorden/webapp"
                },
                "monitorfacturasdetallesfactura-display": {
                    title: "Facturas",
                    url: "./monitor_facturas.detallesfactura/webapp/index.html"
                },
                "monitorfacturasentradas-display": {
                    title: "Entradas",
                    url: "./monitor_facturas.entradas/webapp"
                },
                "monitorfacturasfacturaorden-display": {
                    title: "Factura Orden",
                    url: "./monitor_facturas.facturaorden/webapp"
                },
                "monitorfacturasfacturasxml-display": {
                    title: "Facturas XML",
                    url: "./monitor_facturas.facturasxml/webapp"
                },
                "monitorfacturasmonitorfacturas-display": {
                    title: "Monitor Facturas",
                    url: "./monitor_facturas.monitorfacturas/webapp"
                },
                "monitorfacturasordendecompra-display": {
                    title: "Orden de Compra",
                    url: "./monitor_facturas.ordendecompra/webapp"
                },
                "monitorfacturasproveedores-display": {
                    title: "Proveedores",
                    url: "./monitor_facturas.proveedores/webapp"
                }
            }
        };
        function createTile(title, appId) {
    return new sap.m.GenericTile({
        header: title,
        press: function () {
            const app = window["sap-ushell-config"].applications[appId];
            if (app && app.url) {
                window.open(app.url, "_blank"); // ⬅️ Esto abre en otra pestaña
            } else {
                alert("No se encontró la aplicación para: " + appId);
            }
        },
        tileContent: [
            new sap.m.TileContent({
                content: new sap.ui.core.Icon({ src: "sap-icon://document" })
            })
        ]
    });
}


        sap.ui.getCore().attachInit(function () {
            new sap.m.App({
                pages: [
                    new sap.m.Page({
                        title: "Panel de Aplicaciones - Monitor Facturas",
                        content: [
                            new sap.m.IconTabBar({
                                expandable: false,
                                items: [
                                    new sap.m.IconTabFilter({
                                        text: "Central Facturas",
                                        content: [
                                            new sap.ui.layout.Grid({
                                                defaultSpan: "L3 M6 S12",
                                                content: [
                                                    //createTile("Monitor Facturas", "monitorfacturasmonitorfacturas-display"),
                                                    //createTile("Facturas XML", "monitorfacturasfacturasxml-display"),
                                                    createTile("Facturas", "monitorfacturasdetallesfactura-display"),
                                                    //createTile("Factura Orden", "monitorfacturasfacturaorden-display")
                                                ]
                                            })
                                        ]
                                    }),
                                    new sap.m.IconTabFilter({
                                        text: "Comprador",
                                        content: [
                                            new sap.ui.layout.Grid({
                                                defaultSpan: "L3 M6 S12",
                                                content: [
                                                    //createTile("Proveedores", "monitorfacturasproveedores-display"),
                                                    //createTile("Entradas", "monitorfacturasentradas-display"),
                                                    createTile("Facturas", "monitorfacturasdetallesfactura-display"),
                                                    createTile("Orden de Compra", "monitorfacturasordendecompra-display"),
                                                    createTile("Detalle Orden", "monitorfacturasdetalleorden-display")
                                                ]
                                            })
                                        ]
                                    }), 
                                    new sap.m.IconTabFilter({
                                        text: "Almacenista",
                                        content: [
                                            new sap.ui.layout.Grid({
                                                defaultSpan: "L3 M6 S12",
                                                content: [
                                                    //createTile("Proveedores", "monitorfacturasproveedores-display"),
                                                    createTile("Entradas", "monitorfacturasentradas-display"),
                                                    createTile("Facturas", "monitorfacturasdetallesfactura-display"),
                                                    //createTile("Orden de Compra", "monitorfacturasordendecompra-display"),
                                                    //createTile("Detalle Orden", "monitorfacturasdetalleorden-display")
                                                ]
                                            })
                                        ]
                                    }),
                                    new sap.m.IconTabFilter({
                                        text: "Gestión BOT",
                                        content: [
                                            new sap.ui.layout.Grid({
                                                defaultSpan: "L3 M6 S12",
                                                content: [
                                                    //createTile("Proveedores", "monitorfacturasproveedores-display"),
                                                    //createTile("Entradas", "monitorfacturasentradas-display"),
                                                    createTile("Facturas", "monitorfacturasdetallesfactura-display"),
                                                    //createTile("Orden de Compra", "monitorfacturasordendecompra-display"),
                                                    //createTile("Detalle Orden", "monitorfacturasdetalleorden-display")
                                                ]
                                            })
                                        ]
                                    }), 
                                    new sap.m.IconTabFilter({
                                        text: "Contabilización",
                                        content: [
                                            new sap.ui.layout.Grid({
                                                defaultSpan: "L3 M6 S12",
                                                content: [
                                                    //createTile("Proveedores", "monitorfacturasproveedores-display"),
                                                    //createTile("Entradas", "monitorfacturasentradas-display"),
                                                    createTile("Facturas", "monitorfacturasdetallesfactura-display"),
                                                    //createTile("Orden de Compra", "monitorfacturasordendecompra-display"),
                                                    //createTile("Detalle Orden", "monitorfacturasdetalleorden-display")
                                                ]
                                            })
                                        ]
                                    })
                                ]
                            }),
                            new sap.ui.core.HTML({
                                content: '<iframe id="appFrame" title="Aplicación" src=""></iframe>'
                            })
                        ]
                    })
                ]
            }).placeAt("content");
        });
    </script>
</head>
<body class="sapUiBody" id="content"></body>
</html>
