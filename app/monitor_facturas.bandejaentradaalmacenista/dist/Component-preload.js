//@ui5-bundle monitorfacturas/bandejaentradaalmacenista/Component-preload.js
sap.ui.require.preload({
	"monitorfacturas/bandejaentradaalmacenista/Component.js":function(){
sap.ui.define(["sap/fe/core/AppComponent"],function(a){"use strict";return a.extend("monitorfacturas.bandejaentradaalmacenista.Component",{metadata:{manifest:"json"}})});
},
	"monitorfacturas/bandejaentradaalmacenista/ext/main/Main.controller.js":function(){
sap.ui.define(["sap/fe/core/PageController"],function(e){"use strict";return e.extend("monitorfacturas.bandejaentradaalmacenista.ext.main.Main",{onInit:function(){const e=this.byId("FacturaList");const t=e.getBinding("items");if(t){const e=new sap.ui.model.Filter("Estado",sap.ui.model.FilterOperator.EQ,"Validación Almacenista");t.filter([e])}else{e.attachEventOnce("updateFinished",()=>{const t=e.getBinding("items");const a=new sap.ui.model.Filter("Estado",sap.ui.model.FilterOperator.EQ,"Validación Almacenista");t.filter([a])})}},onDetallePress:function(e){e.preventDefault();e.cancelBubble=true;var t=e.getSource();var a=t.getParent();var n=a.getBindingContext();var i=n.getProperty("NumeroFactura");var r="monitorfacturasbandejaentradaa-display&/Facturas('"+i+"')";if(window.self!==window.top){window.location.hash=r}else{window.location.href="launchpadPage.html#"+r}}})});
},
	"monitorfacturas/bandejaentradaalmacenista/ext/main/Main.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:macros="sap.fe.macros" xmlns:html="http://www.w3.org/1999/xhtml" controllerName="monitorfacturas.bandejaentradaalmacenista.ext.main.Main"><Page id="Main" title="{i18n&gt;MainTitle}"><content></content><Toolbar id="FiltroToolbar" class="sapUiSmallMarginBottom barraFiltros"><Select id="filtroUrgente" change=".onFiltrarEstadoUrgente"><core:Item id="key4" key="" text="Todos" /><core:Item id="key5" key="Sí" text="Sí" /><core:Item id="key6" key="No" text="No" /></Select><SearchField id="searchFactura" width="20rem" placeholder="Buscar número de factura..." search=".onBuscarFactura"/></Toolbar><List id="FacturaList" items="{/Facturas}" headerText="Facturas" growing="true" growingScrollToLoad="true"><CustomListItem id="FacturaCardItem"><VBox id="VBoxFacturaCard" class="facturaCard sapUiSmallMargin sapUiTinyMarginTop sapUiTinyMarginBottom"><HBox id="HBoxEncabezadoFactura" justifyContent="SpaceBetween"><Text id="TextNumeroFactura" text="{NumeroFactura}" class="sapMTitle"/><ObjectStatus id="EstadoFacturaStatus" text="{Estado}" state="{ path: \'Estado\', formatter: \'.formatter.estadoToState\' }"/><Button id="BtnVerDetallesFactura" text="" icon="sap-icon://action" type="Transparent" press="onDetallePress" class="sapUiTinyMarginTop"/></HBox><HBox id="HBoxContenidoFactura" justifyContent="SpaceBetween" class="facturaContenido sapUiTinyMarginTop" wrap="Wrap"><VBox id="VBoxColumna1" class="facturaColumna"><Text id="TextFechaFactura" text="Fecha Factura: {FechaFactura}"/><ObjectStatus id="UrgenteFacturaStatus" text="{ path: \'Urgente\', formatter: \'.formatter.urgenteToText\' }" state="{ path: \'Urgente\', formatter: \'.formatter.urgenteToState\' }"/></VBox><VBox id="VBoxColumna2" class="facturaColumna"></VBox></HBox></VBox></CustomListItem></List></Page></mvc:View>',
	"monitorfacturas/bandejaentradaalmacenista/ext/view/Facturas.controller.js":function(){
sap.ui.define(["sap/fe/core/PageController"],function(e){"use strict";return e.extend("monitorfacturas.bandejaentradaalmacenista.ext.view.Facturas",{onAfterRendering:function(){console.log("✔️ onAfterRendering ejecutado");setTimeout(()=>{this.mostrarPdfEnIframe()},500);const e=new sap.ui.model.json.JSONModel({modoEdicion:false});this.getView().setModel(e,"view")},mostrarPdfEnIframe:function(){const e=this.byId("pdfEmbed");const t=this.getView().getBindingContext();if(!t){console.error("No hay contexto de factura");return}const o=t.getProperty("NumeroFactura");const r=this.getOwnerComponent().getModel();const a=r.sServiceUrl;const n=a+"/Facturas('"+o+"')/archivoPDF/$value";const s=`\n                    <iframe\n                        src="${n}"\n                        width="100%"\n                        height="800px"\n                        style="border: none;"\n                    ></iframe>\n                `;e.setContent(s)},editarFactura:function(){const e=this.getView().getBindingContext();if(!e){console.error("No hay contexto de factura");return}const t={Estado:e.getProperty("Estado"),Urgente:e.getProperty("Urgente"),Descuento:e.getProperty("Descuento"),Comentario:e.getProperty("Comentario"),FechaFactura:e.getProperty("FechaFactura"),FechaContabilizacion:e.getProperty("FechaContabilizacion"),FechaVencimiento:e.getProperty("FechaVencimiento"),FechaRecepcion:e.getProperty("FechaRecepcion"),FormaPago:e.getProperty("FormaPago"),CodigoActividad:e.getProperty("CodigoActividad"),Clasificacion:e.getProperty("Clasificacion"),Area:e.getProperty("Area"),Sede:e.getProperty("Sede"),DocumentoMIRO:e.getProperty("DocumentoMIRO"),DocumentoFI:e.getProperty("DocumentoFI")};this.getView().getModel("view").setProperty("/datosOriginales",t);this.getView().getModel("view").setProperty("/modoEdicion",true)},onGuardar:function(){const e=this.getView();const t=e.getModel();const o=e.getBindingContext();const r=e.getModel("view").getProperty("/datosOriginales");let a=false;Object.entries(r).forEach(([e,t])=>{const r=o.getProperty(e);if(r!==t){a=true}});if(!a){sap.m.MessageToast.show("No hay cambios para guardar.");return}t.submitBatch("$auto").then(()=>{e.getModel("view").setProperty("/modoEdicion",false);e.getModel("view").setProperty("/datosOriginales",null);sap.m.MessageToast.show("Cambios guardados correctamente.")}).catch(e=>{console.error("Error al guardar cambios:",e);sap.m.MessageBox.error("Error al guardar los cambios.")})},onCancelar:function(){const e=this.getView();const t=e.getBindingContext();const o=e.getModel("view").getProperty("/datosOriginales");if(!t||!o){sap.m.MessageToast.show("No se pueden restaurar los datos.");return}Object.entries(o).forEach(([e,o])=>{t.setProperty(e,o)});e.getModel("view").setProperty("/modoEdicion",false);e.getModel("view").setProperty("/datosOriginales",null);sap.m.MessageToast.show("Cambios descartados.")},onDetallePress:function(e){var t=e.getSource();var o=t.getParent();var r=o.getBindingContext();var a=r.getProperty("NumeroEntrada");var n="#monitorfacturasentradas-display&/Entrada('"+a+"')";window.open(n,"_blank")},onDetallePressOrden:function(e){var t=e.getSource();var o=t.getParent();var r=o.getBindingContext();var a=r.getProperty("NumeroMaterial");var n=this.getView().getModel();var s="NumeroMaterial eq '"+a+"'";n.bindList("/DetalleOrdenCompra",null,null,null,{$filter:s}).requestContexts().then(function(e){if(e.length>0){var t=e[0].getObject();var o=t.ID;var r="#monitorfacturasdetalleorden-display&/DetalleOrdenCompra(ID="+o+",IsActiveEntity=true)";window.open(r,"_blank")}else{MessageToast.show("No se encontró el material.")}}).catch(function(){MessageToast.show("Error al consultar DetalleOrdenCompra.")})}})});
},
	"monitorfacturas/bandejaentradaalmacenista/ext/view/Facturas.view.xml":'<mvc:View xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:layout="sap.ui.layout.form" xmlns:macros="sap.fe.macros" xmlns:html="http://www.w3.org/1999/xhtml" controllerName="monitorfacturas.bandejaentradaalmacenista.ext.view.Facturas"><Page id="Facturas" title="{i18n&gt;FacturasTitle}"><content/><HBox id="mainHBox" width="100%"><VBox id="leftVBox" width="50%" renderType="Bare"><Toolbar id="tituloToolbar"><Title id="title" text="Datos de la Factura" level="H2" /><ToolbarSpacer id="toolbarSpacerFactura" /><Button \r\n                    id="myButtonUpdate" \r\n                    text="" \r\n                    visible="{= !${view>/modoEdicion} }" \r\n                    icon="sap-icon://edit" type="Emphasized"\r\n                    press="editarFactura"/><Button\r\n                        id="myButtonSave"\r\n                        text=""\r\n                        icon="sap-icon://save" type="Accept"\r\n                        press="onGuardar"\r\n                        visible="{view>/modoEdicion}"\r\n                        class="sapUiSmallMarginEnd" /><Button\r\n                        id="myButtonCancel"\r\n                        text=""\r\n                        icon="sap-icon://sys-cancel" type="Reject"\r\n                        press="onCancelar"\r\n                        visible="{view>/modoEdicion}"\r\n                        class="sapUiSmallMarginEnd" /></Toolbar><layout:SimpleForm\r\n                    id="facturaForm"\r\n                    editable="false"\r\n                    layout="ResponsiveGridLayout"\r\n                    labelSpanL="4"\r\n                    labelSpanM="4"\r\n                    columnsL="2"\r\n                    columnsM="2"\r\n                    columnsXL="2"\r\n                    singleContainerFullSize="false"><Toolbar id="toolbarGeneral"><Title id="titleGeneral" text="Información General" level="H4" /></Toolbar><Label id="lblNumeroFactura" text="Número Factura" /><Input id="txtNumeroFactura" value="{NumeroFactura}" class="campoBordeado" editable="false"/><Label id="lblProveedor" text="Proveedor" /><Input id="txtProveedor" value="{Proveedor/Nombre1}" class="campoBordeado" editable="false"/><Label id="lblEstado" text="Estado" /><Input id="txtEstado" value="{Estado}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblUrgente" text="Urgente" /><Input id="txtUrgente" value="{Urgente}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblFacturaElec" text="Factura Electrónica" /><Input id="txtFacturaElec" value="{FacturaElec}" class="campoBordeado" editable="false"/><Label id="lblDescuento" text="Descuento pronto pago" /><Input id="txtDescuento" value="{Descuento}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblComentario" text="Comentario" /><Input id="txtComentario" value="{Comentario}" class="campoBordeado" editable="{view>/modoEdicion}"/><Toolbar id="toolbarFechas"><Title id="titleFechas" text="Fechas" level="H4" /></Toolbar><Label id="lblFechaFactura" text="Fecha Factura" /><Input id="txtFechaFactura" value="{FechaFactura}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblFechaContabilizacion" text="Fecha Contabilización" /><Input id="txtFechaContabilizacion" value="{FechaContabilizacion}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblFechaVencimiento" text="Fecha Vencimiento" /><Input id="txtFechaVencimiento" value="{FechaVencimiento}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblFechaRecepcion" text="Fecha de recepción" /><Input id="txtFechaRecepcion" value="{FechaRecepcion}" class="campoBordeado" editable="{view>/modoEdicion}"/><Toolbar id="toolbarValores"><Title id="titleValores" text="Valores Monetarios" level="H4" /></Toolbar><Label id="lblTotalFactura" text="Total de factura" /><Input id="txtTotalFactura" value="{TotalFactura}" class="campoBordeado" editable="false"/><Label id="lblValorFinal" text="Valor final a pagar" /><Input id="txtValorFinal" value="{ValorFinal}" class="campoBordeado" editable="false"/><Label id="lblIVA" text="IVA" /><Input id="txtIVA" value="{IVA}" class="campoBordeado" editable="false"/><Label id="lblIndicadorImpuesto" text="Indicador de impuesto" /><Input id="txtIndicadorImpuesto" value="{IndicadorImpuesto}" class="campoBordeado" editable="false"/><Label id="lblNumeroIndicador" text="Número indicador" /><Input id="txtNumeroIndicador" value="{NumeroIndicador}" class="campoBordeado" editable="false"/><Toolbar id="toolbarDestinatario"><Title id="titleDestinatario" text="Destinatario y Clasificación" level="H4" /></Toolbar><Label id="lblDestinatario" text="Destinatario" /><Input id="txtDestinatario" value="{Destinatario}" class="campoBordeado" editable="false"/><Label id="lblDescDestinatario" text="Descripción del destinatario" /><Input id="txtDescDestinatario" value="{DescripcionDestinatario}" class="campoBordeado" editable="false"/><Label id="lblCodigoActividad" text="Código de actividad" /><Input id="txtCodigoActividad" value="{CodigoActividad}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblClasificacion" text="Clasificación" /><Input id="txtClasificacion" value="{Clasificacion}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblArea" text="Área" /><Input id="txtArea" value="{Area}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblSede" text="Sede" /><Input id="txtSede" value="{Sede}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblDocumentoMIRO" text="Documento MIRO" /><Input id="txtDocumentoMIRO" value="{DocumentoMIRO}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblDocumentoFI" text="Documento FI" /><Input id="txtDocumentoFI" value="{DocumentoFI}" class="campoBordeado" editable="{view>/modoEdicion}"/><Toolbar id="toolbarPago"><Title id="titlePago" text="Datos de Pago" level="H4" /></Toolbar><Label id="lblFormaPago" text="Forma de pago" /><Input id="txtFormaPago" value="{FormaPago}" class="campoBordeado" editable="{view>/modoEdicion}"/><Label id="lblPosiciones" text="Posiciones" /><Input id="txtPosiciones" value="{Posiciones}" class="campoBordeado" editable="false"/></layout:SimpleForm><VBox id="detalleFacturaVBox" class="sapUiMediumMarginTop"></VBox><VBox id="entradasVBox" class="sapUiMediumMarginTop"></VBox></VBox><VBox id="rightVBox" width="50%" class="sapUiContentPadding"><Title id="titlePdf" text="Visualización PDF" level="H4" /><core:HTML id="pdfEmbed" content="" /></VBox></HBox><Table id="tablaDetalleFactura" items="{DetalleFactura}" headerText="Detalles de la Factura"><columns><Column id="columna1"><Text id="11" text="Número Material" /></Column><Column id="columna2" ><Text id="22" text="Descripción" /></Column><Column id="columna3" ><Text id="33" text="Cantidad" /></Column><Column id="columna4" ><Text id="44" text="Valor Unitario" /></Column><Column id="column5" ><Text id="55" text="Valor Total" /></Column><Column id="columna6" ><Text id="66" text="Detalles" /></Column></columns><items><ColumnListItem id="detalleFacturaItem"><cells><Text id="1" text="{NumeroMaterial}" /><Text id="2" text="{Descripcion}" /><Text id="3" text="{Cantidad}" /><Text id="4" text="{ValorUnitario}" /><Text id="5" text="{ValorTotal}" /><Button id="6" text="Ver O.C" icon="sap-icon://show" type="Transparent" press="onDetallePressOrden" /></cells></ColumnListItem></items></Table><Table id="tablaEntradas" items="{Entrada}" headerText="Entradas asociadas a la Factura"><columns><Column id="Columna1"><Text id="Texto1" text="Fecha de emisión" /></Column><Column id="Columna2"><Text id="Texto2" text="Fecha de recepción" /></Column><Column id="Columna3"><Text id="Texto3" text="Número de entrada" /></Column><Column id="Columna4"><Text id="Texto4" text="Detalles" /></Column></columns><items><ColumnListItem id="entradaItem"><cells><Text id="Texto5" text="{FechaEmision}" /><Text id="Texto6" text="{FechaRecepcion}" /><Text id="Texto7" text="{NumeroEntrada}" /><Button id="Boton2" text="Ver detalles" icon="sap-icon://show" type="Transparent" press="onDetallePress" /></cells></ColumnListItem></items></Table></Page></mvc:View>',
	"monitorfacturas/bandejaentradaalmacenista/i18n/i18n.properties":'# This is the resource bundle for monitorfacturas.bandejaentradaalmacenista\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Bandeja Entrada Almacenista\n\n#YDES: Application description\nappDescription=Gesti\\u00f3n de facturas\n#XTIT: Custom view title\nMainTitle=Main\n\n#XFLD,81\nmonitorfacturasbandejaentradaa-display.flpTitle=Bandeja Entrada Almacenista\n#XTIT: Custom view title\nFacturasTitle=Facturas',
	"monitorfacturas/bandejaentradaalmacenista/manifest.json":'{"_version":"1.60.0","sap.app":{"id":"monitorfacturas.bandejaentradaalmacenista","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:fpm","version":"1.17.4","toolsId":"0ccdfb20-5819-47b4-9458-456ef9f551e0"},"dataSources":{"mainService":{"uri":"service/Monitor_FacturasService/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"monitorfacturasbandejaentradaa-display":{"semanticObject":"monitorfacturasbandejaentradaa","action":"display","title":"{{monitorfacturasbandejaentradaa-display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.120.13","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.core":{},"sap.fe.macros":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"monitorfacturas.bandejaentradaalmacenista.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties"}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{},"routes":[{"name":"DetalleFacturaMain","pattern":":?query:","target":"DetalleFacturaMain"},{"name":"FacturasFacturasPage","pattern":"Facturas({FacturasKey}):?query:","target":"FacturasFacturasPage"}],"targets":{"DetalleFacturaMain":{"type":"Component","id":"DetalleFacturaMain","name":"sap.fe.core.fpm","options":{"settings":{"navigation":{"Facturas":{"detail":{"route":"FacturasFacturasPage"}}},"contextPath":"/DetalleFactura","viewName":"monitorfacturas.bandejaentradaalmacenista.ext.main.Main"}}},"FacturasFacturasPage":{"type":"Component","id":"FacturasFacturasPage","name":"sap.fe.core.fpm","options":{"settings":{"navigation":{},"contextPath":"/Facturas","viewName":"monitorfacturas.bandejaentradaalmacenista.ext.view.Facturas"}}}}}},"sap.fiori":{},"sap.cloud":{"public":true,"service":"lcap.Monitor_Facturas"}}'
});
//# sourceMappingURL=Component-preload.js.map
