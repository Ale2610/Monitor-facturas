sap.ui.define(["sap/fe/core/PageController","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageToast"],function(e,t,r,n){"use strict";return e.extend("monitorfacturas.detallesfactura.ext.view.Informaciongeneral",{onAfterRendering:function(){console.log("✔️ onAfterRendering ejecutado");setTimeout(()=>{this.mostrarPdfEnIframe()},500)},mostrarPdfEnIframe:function(){const e=this.byId("pdfEmbed");const t=this.getView().getBindingContext();if(!t){console.error("No hay contexto de factura");return}const r=t.getProperty("NumeroFactura");const n=this.getOwnerComponent().getModel();const o=n.sServiceUrl;const a=o+"/Facturas('"+r+"')/archivoPDF/$value";const i=`\n                <iframe\n                    src="${a}"\n                    width="100%"\n                    height="800px"\n                    style="border: none;"\n                ></iframe>\n            `;e.setContent(i)},onDetallePress:function(e){var t=e.getSource();var r=t.getParent();var n=r.getBindingContext();var o=n.getProperty("NumeroEntrada");var a="#monitorfacturasentradas-display&/Entrada('"+o+"')";window.open(a,"_blank")},onDetallePressOrden:function(e){var t=e.getSource();var r=t.getParent();var o=r.getBindingContext();var a=o.getProperty("NumeroMaterial");var i=this.getView().getModel();var s="NumeroMaterial eq '"+a+"'";i.bindList("/DetalleOrdenCompra",null,null,null,{$filter:s}).requestContexts().then(function(e){if(e.length>0){var t=e[0].getObject();var r=t.ID;var o="#monitorfacturasdetalleorden-display&/DetalleOrdenCompra(ID="+r+",IsActiveEntity=true)";window.open(o,"_blank")}else{n.show("No se encontró el material.")}}).catch(function(){n.show("Error al consultar DetalleOrdenCompra.")})}})});
//# sourceMappingURL=Informaciongeneral.controller.js.map